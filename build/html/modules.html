<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Modules et paquets &mdash; documentation Fiches pour ISN 1.0</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/translations.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="documentation Fiches pour ISN 1.0" href="index.html" />
    <link rel="next" title="Définir ses propres «objets»" href="class.html" />
    <link rel="prev" title="Fichiers" href="fichiers.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="class.html" title="Définir ses propres «objets»"
             accesskey="N">suivant</a></li>
        <li class="right" >
          <a href="fichiers.html" title="Fichiers"
             accesskey="P">précédent</a> |</li>
        <li><a href="index.html">documentation Fiches pour ISN 1.0</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="modules-et-paquets">
<h1>Modules et paquets<a class="headerlink" href="#modules-et-paquets" title="Lien permanent vers ce titre">¶</a></h1>
<div class="section" id="module">
<h2>Module<a class="headerlink" href="#module" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un <strong>module</strong> est basiquement un fichier <tt class="docutils literal"><span class="pre">nom_module.py</span></tt> ordinaire. Les variables, fonctions, classes qui y sont  définies peuvent être <strong>importées</strong> afin d&#8217;être réutilisées.</p>
<p>Python est accompagné de nombreux modules; ils forment sa <a class="reference external" href="http://docs.python.org/3.3/library/index.html">librairie standard</a>. On y trouve par exemple les modules <em>random</em>, <em>math</em>, <em>tkinter</em> et beaucoup d&#8217;autres.</p>
<ul>
<li><p class="first"><strong>Importer un module</strong> et l&#8217;utiliser - <tt class="docutils literal"><span class="pre">import</span> <span class="pre">&lt;nom_module&gt;</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span> <span class="c"># random -&gt; aléatoire</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span> <span class="c"># «dé electronique»</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">de</span><span class="p">():</span> <span class="c"># trop long à écrire ?</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">de</span><span class="p">()</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">de</span><span class="p">()</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="s">&#39;abcdefghijklmnop&#39;</span><span class="p">)</span> <span class="c"># caractère aléatoire de la chaîne</span>
<span class="go">&#39;h&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">Utiliser un <strong>alias</strong> - <tt class="docutils literal"><span class="pre">import</span> <span class="pre">&lt;nom_module&gt;</span> <span class="pre">as</span> <span class="pre">&lt;alias&gt;</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span> <span class="kn">as</span> <span class="nn">alea</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">alea</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">l</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">l</span>
<span class="go">[1, 4, 2, 3]</span>
</pre></div>
</div>
</li>
<li><p class="first">Importer une ou plusieurs fonctions d&#8217;un module - <tt class="docutils literal"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">f1,</span> <span class="pre">f2,</span> <span class="pre">...</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">sqrt</span> <span class="k">as</span> <span class="n">racine</span><span class="p">,</span> <span class="n">exp</span><span class="p">,</span> <span class="n">log</span> <span class="k">as</span> <span class="n">ln</span><span class="p">,</span> <span class="n">e</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">racine</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span>
<span class="go">2.23606797749979</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">round</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="go">2.24</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="nb">round</span><span class="p">(</span><span class="n">racine</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span> <span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]]</span>
<span class="go">[(0, 0.0), (1, 1.0), (2, 1.41), (3, 1.73), (4, 2.0), (5, 2.24)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">random</span> <span class="kn">import</span> <span class="n">uniform</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">uniform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ln</span><span class="p">(</span><span class="n">exp</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">==</span> <span class="n">x</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">exp</span><span class="p">(</span><span class="n">ln</span><span class="p">(</span><span class="n">x</span><span class="p">))</span> <span class="o">==</span> <span class="n">x</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">e</span>
<span class="go">2.718281828459045</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ln</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="go">1.0</span>
</pre></div>
</div>
</li>
<li><p class="first">Importer <strong>tout</strong> ce qu&#8217;un module définit - <tt class="docutils literal"><span class="pre">from</span> <span class="pre">&lt;nom_module&gt;</span> <span class="pre">import</span> <span class="pre">*</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fenetre</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span> <span class="c"># une fenêtre devrait apparaître</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bouton</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">fenetre</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s">&quot;cliquez moi !&quot;</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">fenetre</span><span class="o">.</span><span class="n">destroy</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># le bouton n&#39;apparaît pas ??? normal, il faut encore le positionner</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bouton</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p>Procéder de la sorte est <strong>généralement déconseillé</strong> car de nombreux «noms» sont alors introduis dans l&#8217;interpréteur Python ce qui peut être source de conflits (en cas de multiples imports par exemple).
Vous pouvez toutefois utiliser cette facilité pour écrire de petits programmes de découvertes de tel ou tel module:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># La fonction dir(truc) sert à connaître les noms définis dans le contexte de «truc»</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">()</span> <span class="c"># si «truc» est omis, c&#39;est le contexte courant</span>
<span class="go">[&#39;__builtins__&#39;, &#39;__doc__&#39;, &#39;__name__&#39;, &#39;__package__&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">()</span> <span class="c"># le nom «a» existe à présent</span>
<span class="go">[&#39;__builtins__&#39;, &#39;__doc__&#39;, &#39;__name__&#39;, &#39;__package__&#39;, &#39;a&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">tkinter</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">()</span> <span class="c"># seul le nom «tkinter» (ou plutôt l&#39;espace de nom) est importé</span>
<span class="go">[&#39;__builtins__&#39;, &#39;__doc__&#39;, &#39;__name__&#39;, &#39;__package__&#39;, &#39;a&#39;, &#39;tkinter&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">()</span> <span class="c"># et maintenant ? argh !</span>
<span class="go">[&#39;ACTIVE&#39;, &#39;ALL&#39;, &#39;ANCHOR&#39;, &#39;ARC&#39;, &#39;At&#39;, &#39;AtEnd&#39;, &#39;AtInsert&#39;, &#39;AtSelFirst&#39;, &#39;AtSelLast&#39;, &#39;BASELINE&#39;, &#39;BEVEL&#39;, &#39;BOTH&#39;, &#39;BOTTOM&#39;, &#39;BROWSE&#39;, &#39;BUTT&#39;, &#39;BaseWidget&#39;, &#39;BitmapImage&#39;, &#39;BooleanVar&#39;, &#39;Button&#39;, &#39;CASCADE&#39;, &#39;CENTER&#39;, &#39;CHAR&#39;, &#39;CHECKBUTTON&#39;, &#39;CHORD&#39;, &#39;COMMAND&#39;, &#39;CURRENT&#39; ...</span>
</pre></div>
</div>
</div>
</li>
</ul>
</div>
<div class="section" id="mon-module-exemple">
<h2>Mon module: exemple<a class="headerlink" href="#mon-module-exemple" title="Lien permanent vers ce titre">¶</a></h2>
<ul>
<li><p class="first">Créer un fichier d&#8217;extension <tt class="docutils literal"><span class="pre">.py</span></tt>. Dans cet exemple, il s&#8217;appelle <tt class="docutils literal"><span class="pre">monModule.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># définitions de monModule.py</span>
<span class="n">CONST</span> <span class="o">=</span> <span class="mf">3.14</span>
<span class="k">def</span> <span class="nf">truc</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Salut cowboy.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">Démarrer l&#8217;interpréteur <em>depuis le dossier qui contient le fichier</em> <tt class="docutils literal"><span class="pre">monModule.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">monModule</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CONST</span>
<span class="go">3.14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">truc</span><span class="p">()</span>
<span class="go">Salut cowboy.</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Votre module sera chargé pourvu que Python puisse le trouver ! Pour savoir où Python cherche les modules:</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">path</span> <span class="c"># affiche la liste des dossiers de recherche des modules</span>
</pre></div>
</div>
</div>
</li>
<li><p class="first"><strong>Tester</strong> son module - <tt class="docutils literal"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__':</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># ajouter les lignes suivantes à votre module puis exécuter le normalement</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
     <span class="c"># __name__ vaut &#39;__main__&#39;</span>
     <span class="c"># seulement si Python est</span>
     <span class="c"># directement appelé sur ce fichier</span>
     <span class="c"># code pour tester le module:</span>
     <span class="k">print</span><span class="p">(</span><span class="n">CONST</span><span class="p">)</span>
     <span class="n">truc</span><span class="p">()</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="notion-de-paquet-avance">
<h2>Notion de Paquet (avancé)<a class="headerlink" href="#notion-de-paquet-avance" title="Lien permanent vers ce titre">¶</a></h2>
<p>Un <strong>paquet</strong> - <em>package</em> - sert à regrouper logiquement plusieurs modules. En pratique, c&#8217;est un dossier caractérisé par la présence d&#8217;un fichier <tt class="docutils literal"><span class="pre">__init__.py</span></tt> (qui peut être vide). Outre ce fichier «spécial», on y trouve les modules et éventuellement d&#8217;autres paquets...</p>
<ul>
<li><p class="first">Un paquet est donc un <strong>dossier de la forme</strong>:</p>
<div class="highlight-text"><div class="highlight"><pre>paquet/
        __init__.py
        module1.py
        module2.py
        sousPaquet/
                __init__.py
                autreModule.py
                ...
        ...
</pre></div>
</div>
</li>
<li><p class="first"><strong>Importer un paquet</strong> (revient en fait à «charger» son <tt class="docutils literal"><span class="pre">__init__.py</span></tt>) - <tt class="docutils literal"><span class="pre">import</span> <span class="pre">&lt;paquet&gt;</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">paquet</span>
<span class="c"># si son __init__.py définit la fonction «truc»</span>
<span class="n">paquet</span><span class="o">.</span><span class="n">truc</span><span class="p">()</span> <span class="c"># ok</span>
<span class="n">truc</span><span class="p">()</span> <span class="c"># pas ok !</span>
<span class="kn">from</span> <span class="nn">paquet</span> <span class="kn">import</span> <span class="n">truc</span>
<span class="n">truc</span><span class="p">()</span> <span class="c"># là ok</span>
</pre></div>
</div>
</li>
<li><p class="first">Importer un module contenu dans un paquet - <tt class="docutils literal"><span class="pre">import</span> <span class="pre">&lt;paquet&gt;.&lt;module&gt;</span></tt> ou aussi <tt class="docutils literal"><span class="pre">from</span> <span class="pre">&lt;paquet&gt;</span> <span class="pre">import</span> <span class="pre">&lt;module&gt;</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">paquet.module1</span>
<span class="c"># si module1.py définit la fonction «bidulle»</span>
<span class="n">paquet</span><span class="o">.</span><span class="n">module1</span><span class="o">.</span><span class="n">bidulle</span><span class="p">()</span> <span class="c"># ok.</span>

<span class="c"># vous pouvez utiliser un alias</span>
<span class="kn">import</span> <span class="nn">paquet.module1</span> <span class="kn">as</span> <span class="nn">pm1</span>
<span class="n">pm1</span><span class="o">.</span><span class="n">bidulle</span><span class="p">()</span> <span class="c"># ok</span>

<span class="c"># ou encore</span>
<span class="kn">from</span> <span class="nn">paquet</span> <span class="kn">import</span> <span class="n">module1</span>
<span class="n">module1</span><span class="o">.</span><span class="n">bidulle</span><span class="p">()</span> <span class="c"># ok</span>

<span class="c"># Enfin, pour importer «autreModule»</span>
<span class="kn">import</span> <span class="nn">paquet.sousPaquet.autreModule</span>
</pre></div>
</div>
</li>
<li><p class="first">Importer un (ou plusieurs) «objets» définis dans un module d&#8217;un paquet - <tt class="docutils literal"><span class="pre">from</span> <span class="pre">&lt;paquet&gt;.&lt;module&gt;</span> <span class="pre">import</span> <span class="pre">obj1,</span> <span class="pre">obj2,</span> <span class="pre">...</span></tt>.</p>
</li>
<li><p class="first">Sens particulier de <tt class="docutils literal"><span class="pre">from</span> <span class="pre">&lt;paquet&gt;</span> <span class="pre">import</span> <span class="pre">*</span></tt>.</p>
<p>On pourrait penser que ça charge tous les (sous)modules de &lt;paquet&gt; mais ce n&#8217;est en général pas le cas; La convention est la suivante:</p>
<blockquote>
<div><p>si le fichier <tt class="docutils literal"><span class="pre">__init__.py</span></tt> définit une liste nommée <tt class="docutils literal"><span class="pre">__all__</span></tt>, elle est utilisée comme la liste des noms de modules qui devraient être chargés si <tt class="docutils literal"><span class="pre">from</span> <span class="pre">&lt;paquet&gt;</span> <span class="pre">import</span> <span class="pre">*</span></tt> est utilisé.</p>
</div></blockquote>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table des Matières</a></h3>
  <ul>
<li><a class="reference internal" href="#">Modules et paquets</a><ul>
<li><a class="reference internal" href="#module">Module</a></li>
<li><a class="reference internal" href="#mon-module-exemple">Mon module: exemple</a></li>
<li><a class="reference internal" href="#notion-de-paquet-avance">Notion de Paquet (avancé)</a></li>
</ul>
</li>
</ul>

  <h4>Sujet précédent</h4>
  <p class="topless"><a href="fichiers.html"
                        title="Chapitre précédent">Fichiers</a></p>
  <h4>Sujet suivant</h4>
  <p class="topless"><a href="class.html"
                        title="Chapitre suivant">Définir ses propres «objets»</a></p>
  <h3>Cette page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/modules.txt"
           rel="nofollow">Montrer la source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Recherche rapide</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Saisissez un mot clef ou un nom de module, classe ou fonction.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="class.html" title="Définir ses propres «objets»"
             >suivant</a></li>
        <li class="right" >
          <a href="fichiers.html" title="Fichiers"
             >précédent</a> |</li>
        <li><a href="index.html">documentation Fiches pour ISN 1.0</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Groupe IRES.
      Mis à jour le Mar 26, 2014.
      Créé avec <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.1.
    </div>
  </body>
</html>